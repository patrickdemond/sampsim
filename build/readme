How to build sampsim
====================

sampsim uses CMake (http://cmake.org/) to configure its build process.  CMake is operating system
independent, so in theory it should be possible to build this project under Linux, Windows or
Macintosh.  I strees the words "in theory" since it has currently only been tested and developed
under Linux.


Required Libraries
==================

CMake (cmake.org)
-----------------
There are plenty of pre-compiled binaries of CMake available on the website, or you can download
the source and build it yourself.  Also, many linux distros have it build into their package
managers.  I recommend trying this option first since it's the quickest and easiest to do.


JSON CPP (jsoncpp.sourceforge.net)
----------------------------------
You will need the jsoncpp development libraries.  You can download these from the sourceforge
website or install them using your distro's package manager (try package libjsoncpp-dev)


Optional Libraries
==================

Gnuplot (gnuplot.info)
----------------------
By installing this package you will be provided with an additional option (--plot) which will
plot populations and samples and write them to disk.  You can download this package from the
Gnuplot website or install it using your distro's package manager (try packages gnuplot and
gnuplot-qt).


Building sampsim
================

1. Get a copy of sampsim.

2. Create a build directory somewhere OUTSIDE of the sampsim source code tree so as not to
   polute the repository.

3. Inside your build directory, run cmake:

   For linux: cmake -G "Unix Makefiles" /path/to/sampsim/build

4. Open the CMakeCache.txt file and change the following:

   CMAKE_BUILD_TYPE:STRING=Release

5. Re-run cmake by typing "cmake ." in the build directory.  When it is done you should see:
   "Build files have been written to: ..."

6. You are now ready to build sampsim by typing "make".


Building documentation
======================

1. Install the following packages: doxygen gnuplot graphviz

2. Edit the CMakeCache.txt file, setting BUILD_DOCUMENTATION to ON

3. Re-run cmake in the root of the build directory, this will create a new directory in your
   build directory named doxygen.

4. If after running the cmake command you get the following message then you will need to
   install the doxygen and gnuplot packages for your operating system:

   Could NOT find Doxygen (missing:  DOXYGEN_EXECUTABLE) 
   Could NOT find Gnuplot (missing:  GNUPLOT_EXECUTABLE)

5. In the doxygen directory run cmake -P doc_makeall.cmake  If after running this command you
   get the following error then you will also need to install the graphviz package for your
   operating system:

   CMake Error at doc_makeall.cmake:18 (message):
     error: cannot build sampsim documentation without dot

   Then re-run cmake in the root of the build directory once more before trying step 5 again.
   If successful you will now have a doc/html directory in your doxygen directory.  Point a
   web browser to the index.html file in this directory to browse the API documentation.

Building unit and visualization testing
=======================================

1. Change the testing boolean in the CMakeCache.txt file:

   BUILD_TESTING:BOOL=ON

2. Re-run cmake to configure the tests, re-make the project then run make test:

   cmake .
   make
   make test

3. To generate visualizations go into the build tree's Testing/visualization directory and run
   the create command:

   cd Testing/visualization
   ./create
